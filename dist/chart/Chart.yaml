apiVersion: v2
name: mcp-operator
description: Production-ready Kubernetes operator for Model Context Protocol (MCP) servers with protocol intelligence and auto-discovery
type: application

# Chart version (SemVer)
version: 0.1.0-alpha.16

# Application version (operator version)
appVersion: "0.1.0-alpha.16"

# Keywords for searchability
keywords:
  - mcp
  - model-context-protocol
  - operator
  - kubernetes
  - ai
  - llm
  - claude
  - anthropic

# Project URLs
home: https://github.com/vitorbari/mcp-operator
sources:
  - https://github.com/vitorbari/mcp-operator

# Maintainers
maintainers:
  - name: Vitor Bari Buccianti
    url: https://github.com/vitorbari

# Artifact Hub annotations
annotations:
  # License
  artifacthub.io/license: Apache-2.0
  
  # Operator-specific
  artifacthub.io/operator: "true"
  artifacthub.io/operatorCapabilities: Full Lifecycle
  
  # Links
  artifacthub.io/links: |
    - name: Documentation
      url: https://github.com/vitorbari/mcp-operator/blob/main/README.md
    - name: Source Code
      url: https://github.com/vitorbari/mcp-operator
    - name: MCP Specification
      url: https://modelcontextprotocol.io
  
  # Prerelease flag (for alpha/beta/rc versions)
  artifacthub.io/prerelease: "true"

  # Security updates
  artifacthub.io/containsSecurityUpdates: "false"

  # Signing
  artifacthub.io/signKey: |
    Signed using Cosign keyless signing with GitHub Actions OIDC

  # Changes/Changelog
  artifacthub.io/changes: |
    - kind: added
      description: Initial Helm chart release
      links:
        - name: GitHub Release
          url: https://github.com/vitorbari/mcp-operator/releases

  # CRDs info
  artifacthub.io/crds: |
    - kind: MCPServer
      version: v1
      name: mcpservers.mcp.mcp-operator.io
      displayName: MCP Server
      description: Manages Model Context Protocol server deployments
      example: |
        apiVersion: mcp.mcp-operator.io/v1
        kind: MCPServer
        metadata:
          name: wikipedia-http
          namespace: mcp-tests
        spec:
          image: "mcp/wikipedia-mcp:latest"

          # Override command to force SSE transport mode for FastMCP-based container
          command: ["python", "-m", "wikipedia_mcp"]
          args: ["--transport", "sse", "--port", "8080", "--host", "0.0.0.0"]

          # SSE transport for Wikipedia MCP server
          transport:
            type: "http"
            protocol: "sse"  # Explicitly specify SSE protocol
            config:
              http:
                port: 8080
                path: "/sse"
                sessionManagement: true

          # Health checks - disabled for SSE transport as it doesn't provide /health endpoint
          healthCheck:
            enabled: false

          # Resource requirements
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
            limits:
              cpu: 500m
              memory: 512Mi

          # MCP Protocol Validation Configuration
          validation:
            enabled: true
            strictMode: true
            requiredCapabilities:
              - "tools"
  
  # Recommended Kubernetes version
  artifacthub.io/kubeVersion: ">=1.24.0-0"
