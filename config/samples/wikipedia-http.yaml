apiVersion: mcp.mcp-operator.io/v1
kind: MCPServer
metadata:
  name: wikipedia-http
  namespace: mcp-tests
spec:
  image: "mcp/wikipedia-mcp:latest"

  # Override command to force SSE transport mode for FastMCP-based container
  command: ["python", "-m", "wikipedia_mcp"]
  args: ["--transport", "sse", "--port", "8080", "--host", "0.0.0.0"]

  # SSE transport for Wikipedia MCP server
  transport:
    type: "http"
    config:
      http:
        port: 8080
        path: "/sse"
        sessionManagement: true

  # Health checks - disabled for SSE transport as it doesn't provide /health endpoint
  healthCheck:
    enabled: false

  # Resource requirements
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

  security:
    runAsUser: 1000
    runAsGroup: 1000

  # MCP Protocol Validation Configuration
  validation:
    enabled: true
    strictMode: true
    requiredCapabilities:
      - "tools"
    healthCheckInterval: "1m"
